# 【极客时间】分布式数据库 - 实践篇

##　测试
主要讲了对分布式系统业界分布式系统的测试方法，这里是一份take away。
TPC是主流且通用的DB测试手段。但是问题在于，这个测试可以通过缓存，优化，刷到很高的分数，但实际上在生产环境中可能没那么好用。TPC-C主要测OLTP，TPC-H主要测OLAP。另外它比较关注性能，事务方向的一致性卡的没有那么严。

于是我们有了数据库测试领域的高端服务：Jepsen。它一般要和RD组合作测试，并且要交钱。而且它通过依赖注入的方式，严格把控了一致性。

有人把它的思想做成了混沌工程。最早起源于Netfix，以前只会故意杀死节点，现在包括CPU，内存，网络各种情况的不稳定都可以测试。混沌工程就像分布式系统里的捣蛋鬼，随机注入错误，提升系统容错性。主要方向没问题，争议点在于是否要在生产环境做混沌工程。做了，更加模拟真实场景，但是对客户不负责，万一崩了呢？不做，整个系统没有太多实践意义。

以上所有办法都是通过做实验的方式找数据库中的bug，也就是说要通过实际数据。就算你做一亿次实验，没有找到bug，也不能说明你的系统是正常的。我们要证明系统永远是正确的，就得通过虚的办法，形式化验证TLA，从数学上永远证明系统的正确性。源于lamport的一篇论文，是一种数学化的语言，比较难理解。